<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-US">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Damion Wilson's Blog</title>

    <script src="d3.min.js" charset="utf-8">
    </script>

    <script>
        if (typeof d3 == 'undefined') {
            document.write(
                unescape(
                    '%3Cscript src="http://d3js.org/d3.v3.min.js"%3E%3C/script%3E'
                )
            )
        }
    </script>

    <link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=PT+Serif:700' rel='stylesheet' type='text/css'>

    <style type="text/css" rel="stylesheet">
        body {
            font-family: 'Open Sans Condensed', sans-serif;
        }

        .sidebar {
            position: fixed;
            display: table;
            left: 0px;
            top: 0px;
            height: 100%;
            padding: 12px;
            margin: 1px;
            background: #8b9b77;
            box-shadow: 6px 6px 5px #888888;
            border-radius: 1px;
            color: white;
            width: 100px;
        }

        .sidebar > header {
            color: white;
            font-weight: bold;
            font-size: 1.2em;
        }

        .sidebar > ul {
            padding: 0px;
            margin: 0px;
        }

        .nobullets {
            text-decoration: none;
            display: block;
            list-style-type: none;
        }

        .nobullets > li {
            cursor: pointer;
        }

        .nobullets > li:hover {
            color: yellow;
        }

        .nobullets > li > a {
            text-decoration: none;
        }

        .nobullets > li > a:active,
        .nobullets > li > a:hover {
            color: yellow;
        }

        .main {
            position: relative;
            margin-left: 128px;
            margin-right: 10px;
        }

        .main > div:nth-of-type(1) {
            position: fixed;
            top: 0;
            left: 130px;
            right: 0px;
            padding: 20px;
            margin-top: 2px;
            margin-right: 20px;
            margin-bottom: 50px;
            background: #8b9b77;
            background-image: url('banner.jpg');
            border-bottom: medium thick #202020;
            box-shadow: 6px 6px 5px #888888;
        }

        .main > div:nth-of-type(2) {
            padding-top: 120px;
            margin-left: 10px;
        }

        .main > div:nth-of-type(2) > * {
            display: none;
        }

        /*----------------------------------------*/
        .post-meta {
            display: inline-block;
            font-size: 1.4rem;
            line-height: 1;
            color: #9EABB3;
        }

        .post-meta a{
            color: #9EABB3;
            text-decoration: none;
        }

        .post-meta a:hover{
            text-decoration: underline;
        }

        /*----------------------------------------*/
        .blog-title {
            margin:0;
            font-size:2.2rem;
            letter-spacing:1px;
            font-weight:bold;
            font-family: 'PT Serif', serif;
            text-transform:uppercase;
            color: #f0f060;
        }

        .blog-title a{
            color: inherit;
            text-decoration:none;
        }

        .blog-description{
            margin:0;
            font-size:1.5rem;
            line-height:1em;
            font-weight:normal;
            color: #f0f060;
            letter-spacing:0;
        }

        .linkformat {
            line-height: 20px;
            margin-left: 10px;
            text-align: left;
            padding-top: 10px;
        }

        .linkformat > li {
            font-size: 1.4em;
            margin: 12px;
        }

        .linkformat > li > a {
            text-decoration: none;
        }

        .linkformat > li > a:active,
        .linkformat > li > a:hover {
            text-decoration: underline;
            color: yellow;
        }

        .jumpto {
            position: absolute;
            margin-top: -120px;
        }

        #archive {
            text-indent: 10px;
            padding-top: 5px;
        }

        #archive > li {
        }

        pre {
            background: #efefff;
            /* opacity: 0.8; */
            border: 0px solid black;
            width: 80%;
            margin-left: 20px;
            padding-left: 10px;
        }
    </style>

    <style media="only screen and (max-device-width: 768px)" type="text/css">
        .sidebar {
            position: inherit;
            width: inherit;
            margin: 0;
            padding: 25px;
        }

        .content {
            margin: 0;
            padding: 5px 25px;
            width: inherit;
        }
    </style>

    <script>
        function raise_section(section_name) {
            var section_tag = '#' + section_name;
            var root = d3.select(".main").select("div:nth-of-type(2)");
            root.selectAll("section").style("display", "none");
            root.selectAll(section_tag).style("display", "inline");
        }

        function select_section(obj) {
            raise_section(obj.innerHTML.toLowerCase());
        }

        function init() {
            var section_names = d3
                .select(".main")
                .select("div:nth-of-type(2)")
                .selectAll("section")[0]
                .map(
                    function(_selection) {
                        return _selection.id;
                    }
                )
            ;

            d3
                .select("#choices")
                .selectAll("li")
                .data(section_names)
                .enter()
                    .append("li")
                    .attr("onclick", function(d) {return "raise_section('" + d + "');";})
                    .text(function(d) { return d;})
            ;

            var blog_names = d3.selectAll(".jumpto")[0].map(
                function(_selection) {
                    return _selection.name;
                }
            );

            d3
                .select("#archive")
                .selectAll("li")
                .data(blog_names)
                .enter()
                    .append("li")
                    .append("a")
                    .attr("href", function(d) {return "#" + d;})
                    .attr("onclick", "raise_section('Blog');")
                    .text(function(d) { return d;})
            ;

            raise_section('Blog');
        }
    </script>
</head>
<body onload="init();">
<div class="sidebar">
    <header>
        Damion Wilson's Blog
    </header>
    <hr>
    <ul class="nobullets" id="choices">
    </ul>

    <hr>
    Archives
    <ul class="nobullets" id="archive">
    </ul>
</div>

<div class="main">
    <div>
        <h1 class="blog-title">
            <a href="http://damionw.github.io/">
                Geek on a Rock
            </a>
        </h1>

        <h2 class="blog-description">
            Programming in Bermuda ... and other stuff
        </h2>
    </div>

    <div>
        <section id="Links">
            <ul class="nobullets linkformat">
                <li><a href="https://groups.google.com/forum/#!forum/open-bermuda">Open Bermuda: Promoting a community of open source and open data in Bermuda</a></li>
                <li><a href="http://bermuda.io/">Bermuda.io: Open Data and Analysis Community</a></li>
                <li><a href="https://github.com/damionw">My GitHub Repos</a></li>
                <li><a href="http://deonheyns.com/">Deon Heyns blog</a></li>
                <li><a href="http://bytesnbikes.blogspot.com/">John Gill's blog</a></li>
            </ul>
        </section>

        <section id="About">
            <header class="post-header">
            <h2 class="post-title">About Me</h2>
            </header>
            <p>
            My name is Damion Wilson and I've been a programming enthusiast for a while now
            (anyone else remember the Apple II ? Atari 800 ? Vic-20 ? I guess not).
            </p>
            <p>
            I've been lucky to have been employed programming in the banking, telecoms, trading,
            and reinsurance industries and even did some sysadmin/devops work too. Even so, I can't
            help writing code all the time (someone should eventually stop me).
            </p>
            <p>
            Right now, I'm in reinsurance working on risk systems with a group of really smart
            characters, and have a wonderful wife and two daughters, which is about the best
            anyone can hope for.
            </p>
            <p>
            I won't bother to tell all the things I've written stuff in, but what I like to write
            in these days are Python(Pandas, Numpy, Django), C++(Boost), C(yes, still), Erlang, and
            SQL(PostgreSQL, SQL Server). I have a weakness for Network and Systems programming
            which can be evidenced by the rather ancient
            <a href="http://cipe-win32.sourceforge.net/">CIPE-Win32</a>
            but I also have been known to do GUI work in perl with
            evidenced by the similarly ancient
            <a href="http://search.cpan.org/~dkwilson/Tk-DKW-0.03/">Tk-DKW</a>.
            </p>
            <p>
            My more recent stuff will (eventually) appear <a href="https://github.com/damionw">here</a>
            </p>
            <p>
            Other interests are cycling, <a href="http://www.sanshou.bm/">martial arts</a>, cabinet carpentry and gardening
            </p>
        </section>

        <section id="Blog">
            <p><a class="jumpto" name="2014-09-01"></a></p>
            <header class="post-header">
            <span class="post-meta"><time datetime="2014-09-01">September 1, 2014</time></span>
            <h2 class="post-title">Python Decorator Fun #1</h2>
            </header>
            <p>
Given the title's attached serial number, it would seem like this would
portend an ongoing saga of python decorators ad nauseam. However, I promise
not to bore you to tears (well, almost)
            </p>
            <p>
The intent of this post and any to follow are to demonstrate interesting
and possibly helpful applications of decorator logic, where decorators
themselves promise simpler, more fathomable code.
            </p>
            <p>
Did you ever wish that you could access an object member like it was an
array, but "catch" the subscript and produce a result algorithmically
instead ?
            </p>
Well, have no fear. We will present an interface for just such a beast: The
subscripted decorator.
            <p>
            </p>
We can jump right to a provoking use case. Here we instantiate our demo
object, which is pretending to "hold" a range of numbers from 5 to 11
<pre>
<code>
obj = MyRangeHandler(5, 12)
</code>
</pre>

Let's look at the simple values
<pre>
<code>
print obj.values

[5, 6, 7, 8, 9, 10, 11]
</code>
</pre>
            <p>
So let's get the square of the value at position 2 (7)
<pre>
<code>
print obj.squares[2]

49
</code>
</pre>
            </p>
            <p>
Get it ? However, we don't have to store the square values ahead of time, we can
compute them based on the index passed on the original values
            </p>
            <p>
So, let's see how this is implemented...
            </p>
            <p>
First, we'll need functools
<pre>
<code>
from functools import wraps
</code>
</pre>
            </p>

<p>
We'll define a function that'll produce our decorated method
<pre>
<code>
def subscripted(function_reference):
</code>
</pre>
            <p>
This needs to return a wrapped inner function...
<pre>
<code>
    @wraps(function_reference)
    def wrapper(obj, *args, **kwargs):
</code>
</pre>
            </p>
            <p>
Inside that, we define a class whose sole purpose is to implement
the subscripting protocol's lookup method __getitem__()
<pre>
<code>
        class subscripter(object):
            def __getitem__(self, key):
                return function_reference(obj, key)
</code>
</pre>
            </p>
            <p>
Notice that all it does is call the original object method with the
lookup key that the wrapper caller provided. Now we tell the wrapper to return
an instance of the newly defined class, which has captured the outer
object's reference.
<pre>
<code>
        return subscripter()
</code>
</pre>
            </p>
            <p>
And, we have the decorator method return the wrapper as a property of
of the enclosing object, so it will fetch a new subscripter object
whenever we use the . accessor on the decorated method name.
<pre>
<code>
    return property(wrapper)
</code>
</pre>

<p>
Now, we can create our MyRangeHandler class
<pre>
<code>
class MyRangeHandler(object):
    def __init__(self, start, finish):
        self.values = range(start, finish, 1)
</code>
</pre>
</p>

<p>
And let's implement the squared attribute...
<pre>
<code>
    @subscripted
    def squared(self, index):
        return self.values[index] ** 2
</code>
</pre>
</p>

<p>
    And that's it. This use case can obviously be handled using
normal function-style decomposition or simply storing all computable
values. But, there may be cases where subscript lookup is more "natural"
and precomputation is too expensive.
</p>

<p>
This example doesn't allow for fetching all of the square values, however,
since the subscripter class doesn't support slicing, and isn't a "proper"
standin for a list object in any case.
</p>

<p>
Hope you found that useful !
</p>
<hr>
            <p><a class="jumpto" name="2014-08-27"></a></p>
            <header class="post-header">
            <span class="post-meta"><time datetime="2014-08-27">August 27, 2014</time></span>
            <h2 class="post-title">Finding Paradise ?</h2>
            </header>
            <p>
            Is there anywhere that could truly be called paradise ?
            </p>
            <p>
            Perhaps not, but, when the sun rises after an all night coding session, or the night job
            we had to take to service the mortgage when wages were cut, or even if it's
            the only job we could get, we should still take a second to look outside, at that golden sun rising over the turqouise
            water, and remember, that whatever trouble befalls us, we still can have something to
            speak the meaning to life.
            </p>
            <hr>
            <p>
            We're starting to get our geek community to come together. The google group is
                <a href="https://groups.google.com/forum/#!forum/open-bermuda">here</a>.
            There have been various attempts in, for instance, the dotNet and Arduino circles,
            and there is a robotics club as well as <a href="http://bermuda.io/">Bermuda.io</a>
            which leans toward opening public data for analysis from a general position that all such
            data should be open (highly admirable).
            </p>
            <p>
            Open Bermuda attempts to form a general community of technological enthusiasts, where
            sustaining such a community causes a perpetual cycle of circulating ideas and knowledge
            transfer between people interested in such fields as Mathematics, Programming, Biology,
            Oceanography, Public Policy, Climate Science, Electrical Engineering, Robotics ... Ok,
            there's just too much to list, but you get the picture.
            </p>
            <p>
            If everyone works to keep the community at or above critical mass, then it should all work
            as planned and we'll make not only Bermuda a better place, but the World, too.
            </p>
        </section>
    </div>
</div>
</body>
</html>
